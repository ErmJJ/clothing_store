<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Clothing Store — Admin UI</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- App CSS -->
  <link rel="stylesheet" href="front-end/styles/main.css" />
</head>

<body class="cs-bg">

  <div class="cs-layout">

    <!-- LEFT: main content -->
    <main class="cs-main" role="main">
      <header class="cs-header">
        <div class="cs-title">
          <h1 id="collectionTitle">Productos</h1>
          <p id="collectionSubtitle" class="muted">Panel de administración — Clothing Store</p>
        </div>

        <div class="cs-controls d-flex gap-2 align-items-end">
          <div class="cs-search input-group">
            <span class="input-group-text"><i class="bi bi-search"></i></span>
            <input id="liveSearch" type="search" class="form-control"
              placeholder="Buscar (ej. nombre, id, usuario, categoría...)">
            <button id="clearSearch" class="btn cs-btn-ghost" title="Limpiar"><i class="bi bi-x-lg"></i></button>
            <button id="searchOptionsBtn" class="btn cs-btn-ghost" title="Filtros" aria-label="Filtros"><i
                class="bi bi-funnel"></i></button>
          </div>

          <div class="d-flex gap-2 align-items-end">
            <!-- Columns: icon-only button -->
            <button id="btnColumns" class="btn cs-btn-columns" data-bs-toggle="offcanvas"
              data-bs-target="#columnsOffcanvas" aria-controls="columnsOffcanvas" title="Columnas"
              aria-label="Columnas">
              <i class="bi bi-layout-three-columns"></i>
            </button>

            <!-- Export: green flat button, full text -->
            <button id="btnExport" class="btn cs-btn-export" title="Exportar a CSV" aria-label="Exportar a CSV">
              <i class="bi bi-download me-1"></i> Exportar a CSV
            </button>

            <!-- Create: flat blue button -->
            <button id="btnCreate" class="btn cs-btn-create" title="Crear" aria-label="Crear">
              <i class="bi bi-plus-lg me-1"></i> Crear
            </button>
          </div>

        </div>
      </header>

      <section class="cs-content">
        <div class="cs-card">
          <div class="cs-card-head">
            <div class="cs-card-title">
              <strong id="collectionCardTitle">Listado</strong>
            </div>
          </div>

          <div class="cs-card-body">
            <div class="table-responsive">
              <table id="dataTable" class="table cs-table">
                <thead id="tableHead"></thead>
                <tbody id="tableBody"></tbody>
              </table>
            </div>
          </div>

          <div class="cs-card-footer d-flex justify-content-between align-items-center">
            <div class="small muted" id="rowsInfo">0 registros</div>
            <nav id="pagination" aria-label="Paginación"></nav>
          </div>
        </div>
      </section>
    </main>

    <!-- RIGHT: panel (colecciones + reportes) -->
    <aside class="cs-panel" aria-label="Panel lateral">
      <div class="cs-panel-inner">
        <div class="cs-panel-header">
          <div>
            <h3 class="mb-0">Panel</h3>
            <small class="muted">Control y reportes</small>
          </div>
        </div>

        <div id="collectionsRadios" class="cs-panel-section">
          <!-- renderCollectionsPanel() in app.js will inject navigation here -->
        </div>

        <div class="cs-panel-section">
          <!-- Report buttons kept visible and styled -->
          <div class="d-grid gap-2 mb-3">
            <button id="report_brands_sales" class="btn btn-sm btn-report-old"><i class="bi bi-shop me-2"></i>Marcas con
              ventas</button>
            <button id="report_products_stock" class="btn btn-sm btn-report-old"><i
                class="bi bi-basket3 me-2"></i>Prendas vendidas & stock</button>
            <button id="report_top_brands" class="btn btn-sm btn-report-old"><i class="bi bi-graph-up me-2"></i>Top 5
              marcas</button>
            <button id="report_top_users" class="btn btn-sm btn-report-old"><i class="bi bi-people me-2"></i>Usuarios
              con más compras</button>
            <button id="report_product_ratings" class="btn btn-sm btn-report-old"><i
                class="bi bi-star me-2"></i>Promedio calif. por producto</button>
          </div>
        </div>
      </div>
    </aside>

  </div>

  <!-- Botón para mostrar/ocultar panel en móviles -->
  <button class="panel-toggle d-lg-none">
    <i class="bi bi-layout-sidebar-inset-reverse"></i>
  </button>

  <!-- Offcanvas de columnas -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="columnsOffcanvas" aria-labelledby="columnsOffcanvasLabel">
    <div class="offcanvas-header">
      <h5 id="columnsOffcanvasLabel">Columnas</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
    </div>
    <div class="offcanvas-body">
      <div class="d-flex gap-2 mb-3">
        <button id="showAllCols" class="btn btn-sm btn-outline-primary w-50">Mostrar todas</button>
        <button id="hideAllCols" class="btn btn-sm btn-outline-secondary w-50">Ocultar todas</button>
      </div>
      <div id="columnsList" class="list-group list-group-flush">
        <!-- checkboxes injected by JS -->
      </div>
    </div>
  </div>

  <!-- FORM Modal (create / edit) -->
  <div class="modal fade" id="formModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content cs-modal">
        <div class="modal-header">
          <h5 class="modal-title" id="formModalTitle">Crear / Editar</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <form id="entityForm" class="row g-3">
            <!-- generated by JS -->
          </form>
        </div>
        <div class="modal-footer">
          <button id="formCancel" type="button" class="btn btn-outline-secondary"
            data-bs-dismiss="modal">Cancelar</button>
          <button id="formSubmit" type="button" class="btn btn-primary">Guardar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Confirm delete -->
  <div class="modal fade" id="confirmModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered">
      <div class="modal-content cs-modal">
        <div class="modal-header bg-danger text-white">
          <h6 class="modal-title">Confirmar</h6>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <p id="confirmMessage" class="mb-0">¿Desea eliminar este registro?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button id="confirmDeleteBtn" type="button" class="btn btn-danger">Eliminar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading overlay -->
  <div id="fullLoading" class="cs-loading d-none" aria-hidden="true">
    <div class="spinner-border text-white" role="status" style="width:3rem;height:3rem;">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <!-- Toast container (bottom-right) -->
  <div id="toastContainer" class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index:14000;"></div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- App JS -->
  <script src="front-end/scripts/app.js"></script>
</body>

</html>